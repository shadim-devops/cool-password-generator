<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OneFile Password Generator</title>
  <meta name="description" content="Secure password generator in a single HTML file. Ready for GitHub Pages or Docker deployment." />
  <style>
    :root{--bg:#0b1220;--panel:#0f172a;--text:#e5e7eb;--muted:#94a3b8;--border:#1f2937;--btn:#111827;--btnh:#172033;--bad:#ef4444;--warn:#f59e0b;--ok:#22c55e;--great:#06b6d4}
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
      background:radial-gradient(900px 500px at -10% 110%,#111827,#0b1220);
      color:var(--text);font:16px/1.5 system-ui,sans-serif}
    .wrap{width:min(900px,94vw)}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:18px;padding:22px}
    h1{margin:0 0 10px;font-size:28px}
    .sub{color:var(--muted);margin-bottom:18px}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
    .box{background:#0b1220;border:1px solid var(--border);border-radius:14px;padding:14px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    button{border:1px solid #263045;background:var(--btn);color:var(--text);
      padding:10px 14px;border-radius:12px;font-weight:600;cursor:pointer}
    button:hover{background:var(--btnh)}
    input{background:#0b1220;color:var(--text);border:1px solid var(--border);
      border-radius:10px;padding:8px}
    .out{font-family:monospace;font-size:18px;word-break:break-all;margin-top:10px}
    .strength{height:10px;border-radius:999px;background:#0b1220;border:1px solid var(--border);overflow:hidden;margin-top:12px}
    .bar{height:100%;width:0;background:var(--bad)}
    .meta{display:flex;justify-content:space-between;color:var(--muted);font-size:13px;margin-top:6px}
    footer{margin-top:14px;color:var(--muted);font-size:13px}
    @media(max-width:800px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>üîê OneFile Password Generator</h1>
    <div class="sub">Single-page app, no build step. Just open index.html and it works.</div>

    <div class="grid">
      <div class="box">
        <div class="row">
          <button onclick="generate()">Generate</button>
          <button onclick="copy()">Copy</button>
        </div>

        <div id="out" class="out">Click ‚ÄúGenerate‚Äù</div>

        <div class="strength"><div id="bar" class="bar"></div></div>
        <div class="meta">
          <span id="strength">Strength: ‚Äî</span>
          <span id="entropy">Entropy: ‚Äî</span>
        </div>
      </div>

      <div class="box">
        <div class="row">
          Length <input id="len" type="number" value="16" min="6" max="128">
          Count <input id="count" type="number" value="1" min="1" max="10">
        </div>

        <div class="row">
          <label><input type="checkbox" id="lower" checked> a‚Äìz</label>
          <label><input type="checkbox" id="upper" checked> A‚ÄìZ</label>
          <label><input type="checkbox" id="digits" checked> 0‚Äì9</label>
          <label><input type="checkbox" id="symbols"> symbols</label>
        </div>

        <div class="row">
          <label><input type="checkbox" id="ambig" checked> exclude ambiguous characters</label>
        </div>

        <div class="row">
          <label><input type="checkbox" id="must" checked> guarantee each selected class</label>
        </div>
      </div>
    </div>

    <footer>
      Works fully offline in your browser. No data is sent anywhere.
    </footer>
  </div>
</div>

<script>
const sets={
  lower:'abcdefghijklmnopqrstuvwxyz',
  upper:'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
  digits:'0123456789',
  symbols:'!@#$%^&*()_+{}[]<>?/'
}
const ambig=new Set('O0l1I')

function pool(){
  let p=''
  if(lower.checked)p+=sets.lower
  if(upper.checked)p+=sets.upper
  if(digits.checked)p+=sets.digits
  if(symbols.checked)p+=sets.symbols
  if(ambig.checked)p=[...p].filter(c=>!ambig.has(c)).join('')
  return p
}

function generate(){
  const p=pool()
  if(!p)return
  const l=+len.value
  const c=+count.value
  let res=[]
  for(let i=0;i<c;i++){
    let pwd=''
    while(pwd.length<l) pwd+=p[Math.floor(Math.random()*p.length)]
    res.push(pwd)
  }
  out.textContent=res.join('\n')
  const bits=Math.round(l*Math.log2(p.length))
  entropy.textContent=`Entropy: ${bits} bits`
  strength.textContent=bits>80?'Strength: Strong':'Strength: Medium'
  bar.style.width=Math.min(bits,100)+'%'
  bar.style.background=bits>80?'#22c55e':'#f59e0b'
}

function copy(){
  navigator.clipboard.writeText(out.textContent)
}
</script>
</body>
</html>

